version: "3.8"

services:
  n8n:
    image: n8nio/n8n:latest
    container_name: n8n_proyectos
    restart: always

    # Exposici√≥n de puertos
    ports:
      - "5678:5678"

    # Monta el volumen de workflows dentro del contenedor
    volumes:
      - ../workflows:/home/node/.n8n/workflows
      - n8n_data:/home/node/.n8n  # Datos persistentes (base de datos interna)

    # Archivo de entorno
    env_file:
      - ../.env

    # Variables adicionales
    environment:
      - N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false
      - N8N_BLOCK_ENV_ACCESS_IN_NODE=false
      - N8N_RUNNERS_ENABLED=true
      - N8N_VERSION_CONTROL_ENABLED=true
      - N8N_VERSION_CONTROL_GIT_REPO_URL=https://github.com/BrandonGS22b/N8n_Proyectos.git
      - N8N_VERSION_CONTROL_GIT_BRANCH=main
      - N8N_VERSION_CONTROL_GIT_AUTHOR_NAME=BrandonGS22b
      - N8N_VERSION_CONTROL_GIT_AUTHOR_EMAIL=brandondulian@hotmail.com

volumes:
  n8n_data:
